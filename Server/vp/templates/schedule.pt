<!DOCTYPE html>
<html lang="${request.locale_name}">
<head>
	<meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="${request.static_url('vp:static/css/schedule.css')}">
	<script>
		$(document).ready(function () {
			/*
			Der Template-Parser escaped zwar die & zu &amp;, aber nicht die Umlaute. Doch er laeuft ueber
			utf-8, womit die Umlaute nicht richtig codiert werden. Deshalb escape ich die Umlaute schon im
			json, zb &auml;, der Parser macht es zu &amp;auml; , und dann gehe ich wieder zurueck.
			Nicht schoen, aber funktioniert.
			*/
			$('span').each(function () {
				$(this).html( $(this).html().replace(/&amp;auml;/g, '&auml;')
											.replace(/&amp;ouml;/g, '&ouml;')
											.replace(/&amp;uuml;/g, '&uuml;'));
			})
		});
	</script>
</head>
<body>
	<a href="${request.route_path('start', _query='logout')}">Ausmelden</a>
	<div tal:repeat="event events" tal:switch="event.action">
		<div class="event" tal:case="'cancelling'">
			<img class="event_tag" src="${request.static_url('vp:static/img/cancelling.png')}" height="15">
			<span class="event_tag" tal:content="event.lesson['class']"></span>
			<!-- event.lesson.class funktioniert nicht. Das hier macht genau das gleiche. :P ?? -->
			<span class="event_tag" tal:content="event.lesson['time']"></span>
			<span class="event_tag" tal:content="event.info"></span>
		</div>
		<br>
	</div>
</body>
</html>